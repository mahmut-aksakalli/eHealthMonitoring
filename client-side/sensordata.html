<html>
 <head>
    <title>Calling Web Service from jQuery</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
    <script type="text/javascript">
        var start;
        $(document).ready(function () {
                var wsUrl = "http://192.168.198.101:8080/";
                var soapRequest =
                '<?xml version="1.0" encoding="UTF-8"?> \
                  <SOAP-ENV:Envelope \
                      xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" \
                      xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" \
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" \
                      xmlns:xsd="http://www.w3.org/2001/XMLSchema" \
                      xmlns:ns="urn:myws"> \
                   <SOAP-ENV:Body SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"> \
                    <ns:getSensorData> \
                    </ns:getSensorData> \
                   </SOAP-ENV:Body> \
                  </SOAP-ENV:Envelope> \
                ';

                setInterval(function(){
                  start = new Date().getTime();
                  $.ajax({
                      type: "POST",
                      url: wsUrl,
                      contentType: "text/xml",
                      dataType: "xml",
                      data: soapRequest,
                      success: processSuccess,
                      error: processError
                  });
                },1000);

        });

        function processSuccess(data, status, req) {
            if (status == "success")
                $("#response").text(req.responseTexts);
                console.log("pressure = "+$(req.responseXML).find("ns\\:sensorData").attr("temperature"));
                console.log(new Date().getTime() - start);
        }

        function processError(data, status, req) {
            alert(req.responseText + " " + status);
            alert("fail");

        }

    </script>
</head>
<body>
    <div id="response" />
</body>
</html>
